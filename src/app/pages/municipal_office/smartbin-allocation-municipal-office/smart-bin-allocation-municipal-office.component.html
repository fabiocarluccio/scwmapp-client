<body>
  <h1>Allocazione SmartBins</h1>

  <div class="layout">

    <div class="bin-list">
      <h2>SmartBins attivi</h2>
      <app-smart-bin-item-card [isSelected]="false" [smartBin]=smartbin *ngFor="let smartbin of this.smartBins"></app-smart-bin-item-card>
    </div>

    <div class="right-column">

      <div id="SmartBinsMap">
        <app-map [mapId]="'SmartBinsMap'" (markerEvent)="handleMarkerUpdate($event)"></app-map>
      </div>

      <p class="info">Per posizionare un nuovo SmartBin, effettua un click su un punto vuoto della mappa.</p>
      <!--<button *ngFor="let smartbin of this.smartBins" (click)="highlightBinItem(smartbin.id!)">Evidenzia {{smartbin.name}}</button>-->

      <form #allocateNewBinForm="ngForm" *ngIf="this.showRequestForm" class="cool-background">
        <!--<p>Now, type your new, fresh password üòä</p>-->

        <h5>Alloca nuovo SmartBin</h5>

        <div class="form-group">
          <label for="inputSmartBinName">Nome SmartBin</label>
          <input
            [(ngModel)]="newSmartBin.name" name="smartBinName"
            required
            minlength="3"
            pattern=".*"
            #inputSmartBinName = "ngModel"
            [ngClass]="{'is-invalid': inputSmartBinName.errors && inputSmartBinName.touched}"
            type="text" class="form-control" id="inputSmartBinName" placeholder="Inserisci nome dello SmartBin">

          <div class="invalid-feedback">
            Inserire il nome.
          </div>
        </div>

        <div class="form-group">
          <label for="inputSmartBinType">Tipologia rifiuto</label>


          <select
            [(ngModel)]="newSmartBin.type" name="SmartBinType"
            required
            #inputSmartBinName = "ngModel"
            class="form-control" id="inputSmartBinType">
            <option value="" disabled selected>Seleziona tipologia di rifiuto</option>
            <option value="Indifferenziata">Indifferenziata</option>
            <option value="Vetro">Vetro</option>
            <option value="Plastica">Plastica</option>
          </select>


          <div class="invalid-feedback">
            Selezionare la tipologia.
          </div>
        </div>

        <div class="form-group">
          <label for="inputSmartBinCapacity">Capienza (in kg)</label>
          <input
            [(ngModel)]="newSmartBin.total_capacity" name="SmartBinCapacity"
            required
            minlength="3"
            pattern=".*"
            #inputSmartBinCapacity = "ngModel"
            [ngClass]="{'is-invalid': inputSmartBinCapacity.errors && inputSmartBinCapacity.touched}"
            type="number" class="form-control" id="inputSmartBinCapacity" placeholder="Capienza">

          <div class="invalid-feedback">
            Inserire la capienza.
          </div>
        </div>

        <!--[disabled]="this.markerService.markers.length != 1"-->
        <button
          [disabled] = "!allocateNewBinForm.valid"
          type="submit" (click)="allocateNewBin()" class="btn btn-primary">üìç Alloca nuovo SmartBin</button>

      </form>
      <div class="request-list">
        <h2>Richieste in attesaÔ∏è</h2>


        <app-request-item-card></app-request-item-card>
        <app-request-item-card></app-request-item-card>

        <div class="request-item clickable">
          <h4>SmartBin Via Panoramica</h4>
          <ul>
            <li><div class="bin-indicator black"></div>Indifferenziata</li>
            <li>Capacit√†: <b>55 kg</b></li>
            <!--<button routerLink="/about/{{user.id}}">about</button>
            <button (click)="goToDetail(user.id)">about_businessLogic</button>-->
          </ul>
        </div>
      </div>


    </div>
  </div>


</body>
